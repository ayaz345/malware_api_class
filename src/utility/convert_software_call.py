from common.HashMap import HashMap



with open("source/CallApiMap.txt", "r") as file:
    map = HashMap()
    for line in file:
        line = line.strip()
        if line == "":
            continue
        splitted = line.split("=")
        print(line)
        map.add(splitted[0], splitted[1])

    map.print()
with open("destination/software_calls.txt", "w") as s_file:
    file = open("source/02-CSDMC_API_Train.csv", "r")
    for line in file:
        line = line.strip()
        splitted = line.split(",")
        if splitted[0] == "0":
            continue

        calls = splitted[1].split(" ")

        callLine = ""
        for callStr in calls:

            if callLine != "":
                callLine = f"{callLine},"

            callStr = callStr.lower()
            val = map.get(callStr)
            if val is None:
                print("hatalÄ± durum---------------")
                continue

            callLine = callLine + val

        s_file.write(callLine + "\n")
